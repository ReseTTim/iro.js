{"version":3,"file":"iro.min.js","sources":["../node_modules/preact/dist/preact.mjs","../src/util/dom.js","../src/ui/component.js","../src/ui/marker.js","../src/ui/wheel.js","../src/modules/color.js","../src/ui/slider.js","../src/modules/stylesheet.js","../src/modules/colorPicker.js","../src/iro.js"],"sourcesContent":["var VNode = function VNode() {};\n\nvar options = {};\n\nvar stack = [];\n\nvar EMPTY_CHILDREN = [];\n\nfunction h(nodeName, attributes) {\n\tvar children = EMPTY_CHILDREN,\n\t    lastSimple,\n\t    child,\n\t    simple,\n\t    i;\n\tfor (i = arguments.length; i-- > 2;) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children != null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--;) {\n\t\t\t\tstack.push(child[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tvar p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes == null ? undefined : attributes;\n\tp.key = attributes == null ? undefined : attributes.key;\n\n\tif (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}\n\nfunction extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }return obj;\n}\n\nvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\nfunction cloneElement(vnode, props) {\n  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n}\n\nvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\nvar items = [];\n\nfunction enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\nfunction rerender() {\n\tvar p,\n\t    list = items;\n\titems = [];\n\twhile (p = list.pop()) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n\nfunction isSameNodeType(node, vnode, hydrating) {\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\t\treturn node.splitText !== undefined;\n\t}\n\tif (typeof vnode.nodeName === 'string') {\n\t\treturn !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n\t}\n\treturn hydrating || node._componentConstructor === vnode.nodeName;\n}\n\nfunction isNamedNode(node, nodeName) {\n\treturn node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n}\n\nfunction getNodeProps(vnode) {\n\tvar props = extend({}, vnode.attributes);\n\tprops.children = vnode.children;\n\n\tvar defaultProps = vnode.nodeName.defaultProps;\n\tif (defaultProps !== undefined) {\n\t\tfor (var i in defaultProps) {\n\t\t\tif (props[i] === undefined) {\n\t\t\t\tprops[i] = defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn props;\n}\n\nfunction createNode(nodeName, isSvg) {\n\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\nfunction removeNode(node) {\n\tvar parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nfunction setAccessor(node, name, old, value, isSvg) {\n\tif (name === 'className') name = 'class';\n\n\tif (name === 'key') {} else if (name === 'ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t} else if (name === 'class' && !isSvg) {\n\t\tnode.className = value || '';\n\t} else if (name === 'style') {\n\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value === 'object') {\n\t\t\tif (typeof old !== 'string') {\n\t\t\t\tfor (var i in old) {\n\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in value) {\n\t\t\t\tnode.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];\n\t\t\t}\n\t\t}\n\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t} else {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\ttry {\n\t\t\tnode[name] = value == null ? '' : value;\n\t\t} catch (e) {}\n\t\tif ((value == null || value === false) && name != 'spellcheck') node.removeAttribute(name);\n\t} else {\n\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''));\n\n\t\tif (value == null || value === false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t} else if (typeof value !== 'function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n\nvar mounts = [];\n\nvar diffLevel = 0;\n\nvar isSvgMode = false;\n\nvar hydrating = false;\n\nfunction flushMounts() {\n\tvar c;\n\twhile (c = mounts.pop()) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\nfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\tif (!diffLevel++) {\n\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\thydrating = dom != null && !('__preactattr_' in dom);\n\t}\n\n\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\tif (! --diffLevel) {\n\t\thydrating = false;\n\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tvar out = dom,\n\t    prevSvgMode = isSvgMode;\n\n\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t} else {\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout['__preactattr_'] = true;\n\n\t\treturn out;\n\t}\n\n\tvar vnodeName = vnode.nodeName;\n\tif (typeof vnodeName === 'function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\twhile (dom.firstChild) {\n\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t}\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\tvar fc = out.firstChild,\n\t    props = out['__preactattr_'],\n\t    vchildren = vnode.children;\n\n\tif (props == null) {\n\t\tprops = out['__preactattr_'] = {};\n\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t}\n\t}\n\n\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t} else if (vchildren && vchildren.length || fc != null) {\n\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t}\n\n\tdiffAttributes(out, vnode.attributes, props);\n\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tvar originalChildren = dom.childNodes,\n\t    children = [],\n\t    keyed = {},\n\t    keyedLen = 0,\n\t    min = 0,\n\t    len = originalChildren.length,\n\t    childrenLen = 0,\n\t    vlen = vchildren ? vchildren.length : 0,\n\t    j,\n\t    c,\n\t    f,\n\t    vchild,\n\t    child;\n\n\tif (len !== 0) {\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar _child = originalChildren[i],\n\t\t\t    props = _child['__preactattr_'],\n\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\tif (key != null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = _child;\n\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen !== 0) {\n\t\tfor (var i = 0; i < vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\tvar key = vchild.key;\n\t\t\tif (key != null) {\n\t\t\t\tif (keyedLen && keyed[key] !== undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t} else if (min < childrenLen) {\n\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\tif (f == null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t} else {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (keyedLen) {\n\t\tfor (var i in keyed) {\n\t\t\tif (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);\n\t\t}\n\t}\n\n\twhile (min <= childrenLen) {\n\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t}\n}\n\nfunction recollectNodeTree(node, unmountOnly) {\n\tvar component = node._component;\n\tif (component) {\n\t\tunmountComponent(component);\n\t} else {\n\t\tif (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);\n\n\t\tif (unmountOnly === false || node['__preactattr_'] == null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\nfunction removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tvar next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\nfunction diffAttributes(dom, attrs, old) {\n\tvar name;\n\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\tfor (name in attrs) {\n\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n\nvar recyclerComponents = [];\n\nfunction createComponent(Ctor, props, context) {\n\tvar inst,\n\t    i = recyclerComponents.length;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t} else {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\twhile (i--) {\n\t\tif (recyclerComponents[i].constructor === Ctor) {\n\t\t\tinst.nextBase = recyclerComponents[i].nextBase;\n\t\t\trecyclerComponents.splice(i, 1);\n\t\t\treturn inst;\n\t\t}\n\t}\n\n\treturn inst;\n}\n\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n\nfunction setComponentProps(component, props, renderMode, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tcomponent.__ref = props.ref;\n\tcomponent.__key = props.key;\n\tdelete props.ref;\n\tdelete props.key;\n\n\tif (typeof component.constructor.getDerivedStateFromProps === 'undefined') {\n\t\tif (!component.base || mountAll) {\n\t\t\tif (component.componentWillMount) component.componentWillMount();\n\t\t} else if (component.componentWillReceiveProps) {\n\t\t\tcomponent.componentWillReceiveProps(props, context);\n\t\t}\n\t}\n\n\tif (context && context !== component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (renderMode !== 0) {\n\t\tif (renderMode === 1 || options.syncComponentUpdates !== false || !component.base) {\n\t\t\trenderComponent(component, 1, mountAll);\n\t\t} else {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\nfunction renderComponent(component, renderMode, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tvar props = component.props,\n\t    state = component.state,\n\t    context = component.context,\n\t    previousProps = component.prevProps || props,\n\t    previousState = component.prevState || state,\n\t    previousContext = component.prevContext || context,\n\t    isUpdate = component.base,\n\t    nextBase = component.nextBase,\n\t    initialBase = isUpdate || nextBase,\n\t    initialChildComponent = component._component,\n\t    skip = false,\n\t    snapshot = previousContext,\n\t    rendered,\n\t    inst,\n\t    cbase;\n\n\tif (component.constructor.getDerivedStateFromProps) {\n\t\tstate = extend(extend({}, state), component.constructor.getDerivedStateFromProps(props, state));\n\t\tcomponent.state = state;\n\t}\n\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (renderMode !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t} else if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tif (isUpdate && component.getSnapshotBeforeUpdate) {\n\t\t\tsnapshot = component.getSnapshotBeforeUpdate(previousProps, previousState);\n\t\t}\n\n\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t    toUnmount,\n\t\t    base;\n\n\t\tif (typeof childComponent === 'function') {\n\n\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, 1, context, false);\n\t\t\t} else {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, 0, context, false);\n\t\t\t\trenderComponent(inst, 1, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t} else {\n\t\t\tcbase = initialBase;\n\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || renderMode === 1) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tvar componentRef = component,\n\t\t\t    t = component;\n\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t} else if (!skip) {\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, snapshot);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\twhile (component._renderCallbacks.length) {\n\t\tcomponent._renderCallbacks.pop().call(component);\n\t}if (!diffLevel && !isChild) flushMounts();\n}\n\nfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tvar c = dom && dom._component,\n\t    originalComponent = c,\n\t    oldDom = dom,\n\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t    isOwner = isDirectOwner,\n\t    props = getNodeProps(vnode);\n\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\tisOwner = c.constructor === vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, 3, context, mountAll);\n\t\tdom = c.base;\n\t} else {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, 1, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom !== oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\nfunction unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tvar base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\tvar inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t} else if (base) {\n\t\tif (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\trecyclerComponents.push(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n\nfunction Component(props, context) {\n\tthis._dirty = true;\n\n\tthis.context = context;\n\n\tthis.props = props;\n\n\tthis.state = this.state || {};\n\n\tthis._renderCallbacks = [];\n}\n\nextend(Component.prototype, {\n\tsetState: function setState(state, callback) {\n\t\tif (!this.prevState) this.prevState = this.state;\n\t\tthis.state = extend(extend({}, this.state), typeof state === 'function' ? state(this.state, this.props) : state);\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t},\n\tforceUpdate: function forceUpdate(callback) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\trenderComponent(this, 2);\n\t},\n\trender: function render() {}\n});\n\nfunction render(vnode, parent, merge) {\n  return diff(merge, vnode, {}, false, parent, false);\n}\n\nvar preact = {\n\th: h,\n\tcreateElement: h,\n\tcloneElement: cloneElement,\n\tComponent: Component,\n\trender: render,\n\trerender: rerender,\n\toptions: options\n};\n\nexport default preact;\nexport { h, h as createElement, cloneElement, Component, render, rerender, options };\n//# sourceMappingURL=preact.mjs.map\n","const EVENT_READYSTATE_CHANGE = \"readystatechange\";\nconst READYSTATE_COMPLETE = \"complete\";\n\n/**\n  * @desc listen to one or more events on an element\n  * @param {Element} el target element\n  * @param {Array} eventList the events to listen to\n  * @param {Function} callback the event callback function\n  * @param {Object} params params to pass to addEventListener\n*/\nexport function listen(el, eventList, callback, params={}) {\n  for (var i = 0; i < eventList.length; i++) {\n    el.addEventListener(eventList[i], callback, params);\n  }\n};\n\n/**\n* @desc remove an event listener on an element\n* @param {Element} el target element\n* @param {Array} eventList the events to remove\n* @param {Function} callback the event callback function\n*/\nexport function unlisten(el, eventList, callback) {\n  for (var i = 0; i < eventList.length; i++) {\n    el.removeEventListener(eventList[i], callback);\n  }\n};\n\n/**\n* @desc call fn callback when the page document is ready\n* @param {Function} callback callback function to be called\n*/\nexport function whenReady(callback) {\n  var _this = this;\n  if (document.readyState == READYSTATE_COMPLETE) {\n    callback();\n  }\n  else {\n    listen(document, [EVENT_READYSTATE_CHANGE], function stateChange(e) {\n      if (document.readyState == READYSTATE_COMPLETE) {\n        callback();\n        unlisten(document, [EVENT_READYSTATE_CHANGE], stateChange);\n      }\n    });\n  }\n};","import { Component } from \"preact\";\nimport { listen, unlisten } from \"util/dom\";\n\nconst EVENT_MOUSEDOWN = \"mousedown\",\n      EVENT_MOUSEMOVE = \"mousemove\",\n      EVENT_MOUSEUP = \"mouseup\",\n      EVENT_TOUCHSTART = \"touchstart\",\n      EVENT_TOUCHMOVE = \"touchmove\",\n      EVENT_TOUCHEND = \"touchend\";\n\nexport default class IroComponent extends Component {\n\n  componentDidMount() {\n    console.log(this.root);\n    listen(this.root, [EVENT_MOUSEDOWN, EVENT_TOUCHSTART], this, { passive:false });\n  }\n\n  componentWillUnmount() {\n    unlisten(this.root, [EVENT_MOUSEDOWN, EVENT_TOUCHSTART], this);\n  }\n\n  handleEvent(e) {\n    const { root } = this;\n    // Detect if the event is a touch event by checking if it has the `touches` property\n    // If it is a touch event, use the first touch input\n    e.preventDefault();\n    var point = e.touches ? e.changedTouches[0] : e;\n    var x = point.clientX;\n    var y = point.clientY;\n    // Get the screen position of the component\n    var rect = root.getBoundingClientRect();\n\n    var hsv;  \n    switch (e.type) {\n      case EVENT_MOUSEDOWN:\n      case EVENT_TOUCHSTART:\n        listen(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this, { passive:false });\n        hsv = this.input(x, y, rect, \"START\");\n        // parent.emit(\"input:start\", parent.color);\n        break;\n      case EVENT_MOUSEMOVE:\n      case EVENT_TOUCHMOVE:\n        // Use the position to update the picker color\n        hsv = this.input(x, y, rect, \"MOVE\");\n        break;\n      case EVENT_MOUSEUP:\n      case EVENT_TOUCHEND:\n        hsv = this.input(x, y, rect, \"END\");\n        // parent.emit(\"input:end\", parent.color);\n        unlisten(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this);\n        break;\n    }\n    // if (hsv) parent.color.hsv = hsv;\n  }\n\n  input(x, y, rect, type) {\n\n  }\n\n}","export default function IroMarker(props) {\n  return (\n    <svg class=\"iro__marker\" x={props.x} y={props.y} overflow=\"visible\">\n      <circle class=\"iro__marker__outer\" x={0} y={0} fill=\"none\" stroke-width={5} stroke=\"#000\" vectorEffect=\"non-scaling-stroke\"></circle>\n      <circle class=\"iro__marker__inner\" x={0} y={0} fill=\"none\" stroke-width={7} stroke=\"#fff\" vectorEffect=\"non-scaling-stroke\"></circle>\n    </svg>\n  );\n}","import IroComponent from \"ui/component\";\nimport Marker from \"ui/marker\";\n\n// Quick references to reused math functions\nvar PI = Math.PI,\n    sqrt = Math.sqrt,\n    abs = Math.abs,\n    round = Math.round;\n\nfunction arcPath(cx, cy, radius, startAngle, endAngle) {\n  var largeArcFlag = endAngle - startAngle <= 180 ? 0 : 1;\n  startAngle *= Math.PI / 180;\n  endAngle *= Math.PI / 180;\n  var x1 = cx + radius * Math.cos(endAngle),\n      y1 = cy + radius * Math.sin(endAngle),\n      x2 = cx + radius * Math.cos(startAngle),\n      y2 = cy + radius * Math.sin(startAngle);\n  return [\"M\", x1, y1, \"A\", radius, radius, 0, largeArcFlag, 0, x2, y2].join(\" \");\n}\n\nexport default class IroWheel extends IroComponent {\n\n  render(props) {\n    return (\n      <svg class=\"iro__wheel\" x={0} y={0} ref={el => this.root = el}>\n        <defs>\n          <radialGradient id=\"iroGradient2\">\n            <stop offset=\"0%\" stop-color=\"#fff\" />\n            <stop offset=\"100%\" stop-color=\"#fff\" stop-opacity=\"0\"/>\n          </radialGradient>\n        </defs>\n        <circle \n          class=\"iro__wheel__border\"\n          cx={0}\n          cy={0}\n          r={0}\n          fill=\"#fff\"\n          stroke=\"#fff\"\n          stroke-width={2}\n          vector-effect=\"non-scaling-stroke\"\n        />\n        <g class=\"__hue\" stroke-width={2} fill=\"none\">\n          { new Array(360).fill(0).map((_, hue) => (\n            <path d={ arcPath(0, 0, hue, hue + 1.5) } stroke={`hsl(${ props.anticlockwise ? 360 - hue : hue }, 100%, 50%)`} />\n          ))}\n        </g>\n        <circle \n          class=\"iro__wheel__saturation\"\n          cx={0}\n          cy={0}\n          r={0}\n          fill=\"url(#iroGradient2)\"\n        />\n        <circle \n          class=\"iro__wheel__lightness\"\n          cx={0}\n          cy={0}\n          r={0}\n          opacity={0}\n        />\n        <Marker x={0} y={0} />\n      </svg>\n    );\n  }\n  /**\n    * @desc updates this element to represent a new color value\n    * @param {Object} color - an iroColor object with the new color value\n    * @param {Object} changes - an object that gives a boolean for each HSV channel, indicating whether ot not that channel has changed\n  */\n  update(color, changes) {\n    var opts = this._opts;\n    var hsv = color.hsv;\n    // If the V channel has changed, redraw the wheel UI with the new value\n    if (changes.v && opts.lightness) {\n      this._lightness.setAttrs({opacity: (1 - hsv.v / 100).toFixed(2) });\n    }\n    // If the H or S channel has changed, move the marker to the right position\n    if (changes.h || changes.s) {\n      // convert the hue value to radians, since we'll use it as an angle\n      var hueAngle = (opts.anticlockwise ? 360 - hsv.h : hsv.h) * (PI / 180);\n      // convert the saturation value to a distance between the center of the ring and the edge\n      var dist = (hsv.s / 100) * opts.rMax;\n      // Move the marker based on the angle and distance\n      this.marker.move(this.cX + dist * Math.cos(hueAngle), this.cY + dist * Math.sin(hueAngle));\n    }\n  }\n\n  /**\n    * @desc Takes a point at (x, y) and returns HSV values based on this input -- use this to update a color from mouse input\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Object} - new HSV color values (some channels may be missing)\n  */\n  input(x, y, rect, type) {\n    var opts = this._opts;\n    var rangeMax = opts.rMax;\n    var cX = rect.width / 2;\n    var cY = rect.height / 2;\n\n    x = cX - (x - rect.left);\n    y = cY - (y - rect.top);\n\n    var angle = Math.atan2(y, x),\n        // Calculate the hue by converting the angle to radians\n        hue = round(angle * (180 / PI)) + 180,\n        // Find the point's distance from the center of the wheel\n        // This is used to show the saturation level\n        dist = Math.min(sqrt(x * x + y * y), rangeMax);\n    \n    hue = (opts.anticlockwise ? 360 - hue : hue);\n\n    // Return just the H and S channels, the wheel element doesn't do anything with the L channel\n    return {\n      h: hue,\n      s: round((100 / rangeMax) * dist)\n    };\n  }\n\n  // /**\n  //   * @desc Check if a point at (x, y) is inside this element\n  //   * @param {Number} x - point x coordinate\n  //   * @param {Number} y - point y coordinate\n  //   * @return {Boolean} - true if the point is a \"hit\", else false\n  // */\n  // checkHit(x, y) {\n  //   var opts = this._opts;\n\n  //   // Check if the point is within the hue ring by comparing the point's distance from the centre to the ring's radius\n  //   // If the distance is smaller than the radius, then we have a hit\n  //   var dx = abs(x - opts.cX),\n  //       dy = abs(y - opts.cY);\n  //   return sqrt(dx * dx + dy * dy) < opts.r;\n  // }\n}","var round = Math.round;\nvar floor = Math.floor;\n\n/**\n  * @desc generic parser for hsl / rgb / etc string\n  * @param {String} str - color string\n  * @param {Array} maxValues - max values for each channel (used for calculating percent-based values)\n  * @return {Array} type (rgb | rgba | hsl | hsla) values for each channel\n*/\nfunction parseColorStr(str, maxValues) {\n  var parsed = str.match(/(\\S+)\\((\\d+)(%?)(?:\\D+?)(\\d+)(%?)(?:\\D+?)(\\d+)(%?)(?:\\D+?)?([0-9\\.]+?)?\\)/i),\n      val1 = parseInt(parsed[2]),\n      val2 = parseInt(parsed[4]),\n      val3 = parseInt(parsed[6]);\n  return [\n    parsed[1],\n    parsed[3] == \"%\" ? val1 / 100 * maxValues[0] : val1,\n    parsed[5] == \"%\" ? val2 / 100 * maxValues[1] : val2,\n    parsed[7] == \"%\" ? val3 / 100 * maxValues[2] : val3,\n    parseFloat(parsed[8]) || undefined\n  ];\n};\n\n/**\n  * @desc convert object / string input to color if necessary\n  * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @return {color} color instance\n*/\nfunction getColor(value) {\n  return value instanceof color ? value : new color(value);\n};\n\n/**\n  * @desc clamp value between min and max\n  * @param {Number} value\n  * @param {Number} min\n  * @param {Number} max\n  * @return {Number}\n*/\nfunction clamp(value, min, max) {\n  return value <= min ? min : value >= max ? max : value;\n};\n\n/**\n  * @desc compare values between two objects, returns a object representing changes with true/false values\n  * @param {Object} a\n  * @param {Object} b\n  * @return {Object}\n*/\nfunction compareObjs(a, b) {\n  var changes = {};\n  for (var key in a) changes[key] = b[key] != a[key];\n  return changes;\n};\n\nexport default class color {\n  /**\n    * @constructor color object\n    * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  */\n  constructor(value) {\n    // The watch callback function for this color will be stored here\n    this._onChange = false;\n    // The default color value\n    this._value = {h: undefined, s: undefined, v: undefined};\n    if (value) this.set(value);\n  }\n\n  /**\n    * @desc mix two colors\n    * @param {Object | String | color} color1 - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Object | String | color} color2 - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Number} weight - closer to 0 = more color1, closer to 100 = more color2\n    * @return {color} color instance\n  */\n  static mix(color1, color2, weight) {\n    var rgb1 = getColor(color1).rgb,\n        rgb2 = getColor(color2).rgb;\n    weight = clamp((weight / 100 || 0.5), 0, 1);\n    return new color({\n      r: floor(rgb1.r + (rgb2.r - rgb1.r) * weight),\n      g: floor(rgb1.g + (rgb2.g - rgb1.g) * weight),\n      b: floor(rgb1.b + (rgb2.b - rgb1.b) * weight),\n    });\n  }\n\n  /**\n    * @desc lighten color by amount\n    * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Number} amount\n    * @return {color} color instance\n  */\n  static lighten(color, amount) {\n    var col = getColor(color),\n        hsv = col.hsv;\n    hsv.v = clamp(hsv.v + amount, 0, 100);\n    col.hsv = hsv;\n    return col;\n  }\n\n  /**\n    * @desc darken color by amount\n    * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Number} amount\n    * @return {color} color instance\n  */\n  static darken(color, amount) {\n    var col = getColor(color),\n        hsv = col.hsv;\n    hsv.v = clamp(hsv.v - amount, 0, 100);\n    col.hsv = hsv;\n    return col;\n  }\n\n  /**\n    * @desc convert hsv object to rgb\n    * @param {Object} hsv - hsv object\n    * @return {Object} rgb object\n  */\n  static hsv2Rgb(hsv) {\n    var r, g, b, i, f, p, q, t;\n    var h = hsv.h/360, s = hsv.s/100, v = hsv.v/100;\n    i = floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0: r = v, g = t, b = p; break;\n      case 1: r = q, g = v, b = p; break;\n      case 2: r = p, g = v, b = t; break;\n      case 3: r = p, g = q, b = v; break;\n      case 4: r = t, g = p, b = v; break;\n      case 5: r = v, g = p, b = q; break;\n    }\n    return {r: round(r * 255), g: round(g * 255), b: round(b * 255)};\n  }\n\n  /**\n    * @desc convert rgb object to hsv\n    * @param {Object} rgb - rgb object\n    * @return {Object} hsv object\n  */\n  static rgb2Hsv(rgb) {\n    // Modified from https://github.com/bgrins/TinyColor/blob/master/tinycolor.js#L446\n    var r = rgb.r / 255,\n        g = rgb.g / 255,\n        b = rgb.b / 255,\n        max = Math.max(r, g, b),\n        min = Math.min(r, g, b),\n        delta = max - min,\n        hue;\n    switch (max) {\n      case min: hue = 0; break;\n      case r: hue = (g - b) / delta + (g < b ? 6 : 0); break;\n      case g: hue = (b - r) / delta + 2; break;\n      case b: hue = (r - g) / delta + 4; break;\n    }\n    hue /= 6;\n    return {\n      h: hue * 360,\n      s: max == 0 ? 0 : (delta / max) * 100,\n      v: max * 100\n    };\n  }\n\n  /**\n    * @desc convert hsv object to hsl\n    * @param {Object} hsv - hsv object\n    * @return {Object} hsl object\n  */\n  static hsv2Hsl(hsv) {\n    var s = hsv.s / 100,\n        v = hsv.v / 100;\n    var l = 0.5 * v * (2 - s);\n    s = v * s / (1 - Math.abs(2 * l - 1));\n    return {\n      h: hsv.h,\n      s: s * 100 || 0,\n      l: l * 100\n    };\n  }\n\n  /**\n    * @desc convert hsl object to hsv\n    * @param {Object} hsl - hsl object\n    * @return {Object} hsv object\n  */\n  static hsl2Hsv(hsl) {\n    var s = hsl.s / 100,\n    l = hsl.l / 100;\n    l *= 2;\n    s *= (l <= 1) ? l : 2 - l;\n    return {\n      h: hsl.h,\n      s: ((2 * s) / (l + s)) * 100,\n      v: ((l + s) / 2) * 100\n    };\n  }\n\n  /**\n    * @desc convert hsl object to string\n    * @param {Object} hsl - hsl object\n    * @return {Object} hsl string\n  */\n  static hsl2Str(hsl) {\n    return \"hsl\" + (hsl.a ? \"a\" : \"\") + \"(\" + hsl.h + \", \" + hsl.s + \"%, \" + hsl.l + \"%\" + (hsl.a ? \", \" + hsl.a : \"\") + \")\";\n  }\n\n  /**\n    * @desc convert rgb object to string\n    * @param {Object} rgb - rgb object\n    * @return {Object} rgb string\n  */\n  static rgb2Str(rgb) {\n    return \"rgb\" + (rgb.a ? \"a\" : \"\") + \"(\" + rgb.r + \", \" + rgb.g + \", \" + rgb.b + (rgb.a ? \", \" + rgb.a : \"\") + \")\";\n  }\n\n  /**\n    * @desc convert rgb object to hex string\n    * @param {Object} rgb - rgb object\n    * @return {Object} hex string\n  */\n  static rgb2Hex(rgb) {\n    var str = \"#\";\n    str += rgb.r.toString(16).padStart(2, \"0\");\n    str += rgb.g.toString(16).padStart(2, \"0\");\n    str += rgb.b.toString(16).padStart(2, \"0\");\n    return str;\n  }\n\n  /**\n    * @desc parse hex string\n    * @param {String} str - color string\n    * @return {Object} rgb object\n  */\n  static parseHexStr(hex) {\n    // Strip any \"#\" characters\n    hex = hex.replace(\"#\", \"\");\n    // Prefix the hex string with \"0x\" which indicates a number in hex notation, then convert to an integer\n    var int = parseInt(\"0x\" + hex),\n        // If the length of the input is only 3, then it is a shorthand hex color\n        isShorthand = hex.length == 3,\n        // bitMask for isolating each channel\n        bitMask = isShorthand ? 0xF : 0xFF,\n        // bitLength of each channel (for example, F is 4 bits long while FF is 8 bits long)\n        bitLength = isShorthand ? 4 : 8,\n        // If we're using shorthand notation, multiply each channel by 17\n        multiplier = isShorthand ? 17 : 1;\n    return {\n      r: ((int >> (bitLength * 2)) & bitMask) * multiplier,\n      g: ((int >> bitLength) & bitMask) * multiplier,\n      b: (int & bitMask) * multiplier,\n    };\n  }\n\n  /**\n    * @desc parse hsl string\n    * @param {String} str - color string\n    * @return {Object} hsl object\n  */\n  static parseHslStr(str) {\n    var parsed = parseColorStr(str, [360, 100, 100]);\n    return {\n      h: parsed[2],\n      s: parsed[3],\n      l: parsed[4]\n    };\n  }\n\n  /**\n    * @desc parse rgb string\n    * @param {String} str - color string\n    * @return {Object} rgb object\n  */\n  static parseRgbStr(str) {\n    var parsed = parseColorStr(str, [255, 255, 255]);\n    return {\n      r: parsed[1],\n      g: parsed[2],\n      b: parsed[3]\n    };\n  }\n\n  get hsv() {\n    // _value is cloned to allow changes to be made to the values before passing them back\n    var v = this._value;\n    return {h: v.h, s: v.s, v: v.v};\n  }\n\n  set hsv(newValue) {\n    // If this color is being watched for changes we need to compare the new and old values to check the difference\n    // Otherwise we can just be lazy\n    if (this._onChange) {\n      var oldValue = this._value;\n      for (var channel in oldValue) {\n        if (!newValue.hasOwnProperty(channel)) newValue[channel] = oldValue[channel];\n      }\n      var changes = compareObjs(oldValue, newValue);\n      // Update the old value\n      this._value = newValue;\n      // If the value has changed, call hook callback\n      if (changes.h || changes.s || changes.v) this._onChange(this, changes);\n    } else {\n      this._value = newValue;\n    }\n  }\n\n  get rgb() {\n    var rgb = color.hsv2Rgb(this._value);\n    return {\n      r: round(rgb.r),\n      g: round(rgb.g),\n      b: round(rgb.b),\n    };\n  }\n\n  set rgb(value) {\n    this.hsv = color.rgb2Hsv(value);\n  }\n\n  get hsl() {\n    var hsl = color.hsv2Hsl(this._value);\n    return {\n      h: round(hsl.h),\n      s: round(hsl.s),\n      l: round(hsl.l),\n    };\n  }\n\n  set hsl(value) {\n    this.hsv = color.hsl2Hsv(value);\n  }\n\n  get rgbString() {\n    return color.rgb2Str(this.rgb);\n  }\n\n  set rgbString(value) {\n    this.rgb = color.parseRgbStr(value);\n  }\n\n  get hexString() {\n    return color.rgb2Hex(this.rgb);\n  }\n\n  set hexString(value) {\n    this.rgb = color.parseHexStr(value);\n  }\n\n  get hslString() {\n    return color.hsl2Str(this.hsl);\n  }\n\n  set hslString(value) {\n    this.hsl = color.parseHslStr(value);\n  }\n\n  /**\n    * @desc set the color from any valid value\n    * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  */\n  set(value) {\n    if (typeof value == \"object\") {\n      if (value instanceof color) {\n        this.hsv = color.hsv;\n      } else if (\"r\" in value) {\n        this.rgb = value;\n      } else if (\"v\" in value) {\n        this.hsv = value;\n      } else if (\"l\" in value) {\n        this.hsl = value;\n      }\n    } else if (typeof value == \"string\") {\n      if (/^rgb/.test(value)) {\n        this.rgbString = value;\n      } else if (/^hsl/.test(value)) {\n        this.hslString = value;\n      } else if (/^#[0-9A-Fa-f]/.test(value)) {\n        this.hexString = value;\n      }\n    }\n  }\n\n  /**\n    * @desc shortcut to set a specific channel value\n    * @param {String} model - hsv | hsl | rgb\n    * @param {String} channel - individual channel to set, for example if model = hsl, chanel = h | s | l\n    * @param {Number} value - new value for the channel\n  */\n  setChannel(model, channel, value) {\n    var v = this[model];\n    v[channel] = value;\n    this[model] = v;\n  }\n\n  /**\n    * @desc make new color instance with the same value as this one\n    * @return {color}\n  */\n  clone() {\n    return new color(this);\n  }\n\n  /**\n    * @desc compare this color against another, returns a object representing changes with true/false values\n    * @param {Object | String | color} color - color to compare against\n    * @param {String} model - hsv | hsl | rgb\n    * @return {Object}\n  */\n  compare(color, model) {\n    model = model || \"hsv\";\n    return compareObjs(this[model], getColor(color)[model]);\n  }\n\n  /**\n    * @desc mix a color into this one\n    * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Number} weight - closer to 0 = more current color, closer to 100 = more new color\n  */\n  mix(color, weight) {\n    this.hsv = mix(this, color, weight).hsv;\n  }\n\n  /**\n    * @desc lighten color by amount\n    * @param {Number} amount\n  */\n  lighten(amount) {\n    lighten(this, amount);\n  }\n\n  /**\n    * @desc darken color by amount\n    * @param {Number} amount\n  */\n  darken(amount) {\n    darken(this, amount);\n  }\n}","import IroComponent from \"ui/component\";\nimport Marker from \"ui/marker\";\n\nimport iroColor from \"modules/color\";\n\nexport default class IroSlider extends IroComponent {\n\n  render(props) {\n    return (\n      <svg class=\"iro__slider\" x={0} y={0} ref={el => this.root = el}>\n        <defs>\n          <linearGradient id=\"iroGradient1\">\n            <stop offset=\"0%\" stop-color=\"#000\" />\n            <stop offset=\"100%\" stop-color=\"#fff\" />\n          </linearGradient>\n        </defs>\n        <rect \n          class=\"iro__slider__value\"\n          rx={0} \n          ry={0} \n          x={0} \n          y={0} \n          width={0} \n          height={0}\n          stroke-width={2}\n          stroke=\"#fff\"\n          fill=\"url(#iroGradient1)\"\n          vectorEffect=\"non-scaling-stroke\"\n        />\n        <Marker x={0} y={0} />\n      </svg>\n    );\n  }\n\n  /**\n    * @desc updates this element to represent a new color value\n    * @param {Object} color - an iroColor object with the new color value\n    * @param {Object} changes - an object that gives a boolean for each HSV channel, indicating whether ot not that channel has changed\n  */\n  update(color, changes) {\n    var opts = this._opts;\n    var range = opts.range;\n    var hsv = color.hsv;\n    var hsl = iroColor.hsv2Hsl({h: hsv.h, s: hsv.s, v: 100});\n    if (opts.sliderType == \"v\") {\n      if (changes.h || changes.s) {\n        this._gradient.stops[1].setAttrs({stopColor: \"hsl(\" + hsl.h + \",\" + hsl.s + \"%,\" + hsl.l + \"%)\"});\n      }\n      if (changes.v) {\n        var percent = (hsv.v / 100);\n        this.marker.move(range.min + (percent * range.w), (opts.h / 2));\n      }\n    }\n  }\n\n  /**\n    * @desc Takes a point at (x, y) and returns HSV values based on this input -- use this to update a color from mouse input\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Object} - new HSV color values (some channels may be missing)\n  */\n  input(x, y, rect, type) {\n    x = x - rect.left;\n    y = y - rect.top;\n    var opts = this._opts;\n    var range = opts.range;\n    var dist = Math.max(Math.min(x, range.max), range.min) - range.min;\n    return {\n      v: Math.round((100 / range.w) * dist),\n    };\n  }\n}","\nexport default class stylesheet {\n  /**\n    @constructor stylesheet writer\n  */\n  constructor() {\n    // Create a new style element\n    let style = document.createElement(\"style\");\n    document.head.appendChild(style);\n    // Webkit apparently requires a text node to be inserted into the style element\n    // (according to https://davidwalsh.name/add-rules-stylesheets)\n    style.appendChild(document.createTextNode(\"\"));\n    this.style = style;\n    // Create a reference to the style element's CSSStyleSheet object\n    // CSSStyleSheet API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet\n    let sheet = style.sheet;\n    this.sheet = sheet;\n    // Get a reference to the sheet's CSSRuleList object\n    // CSSRuleList API: https://developer.mozilla.org/en-US/docs/Web/API/CSSRuleList\n    this.rules = sheet.rules || sheet.cssRules;\n    // We'll store references to all the CSSStyleDeclaration objects that we change here, keyed by the CSS selector they belong to\n    // CSSStyleDeclaration API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration\n    this.map = {};\n  }\n\n  get enabled() {\n    return !this.sheet.disabled;\n  }\n\n  set enabled(value) {\n    this.sheet.disabled = !value;\n  }\n\n  // TODO: consider removing cssText + css properties since i don't tink they're that useful\n  get cssText() {\n    var map = this.map;\n    var ret = [];\n    for (var selector in map) {\n      ret.push(selector.replace(/,\\W/g, \",\\n\") + \" {\\n\\t\" + map[selector].cssText.replace(/;\\W/g, \";\\n\\t\") + \"\\n}\");\n    }\n    return ret.join(\"\\n\");\n  }\n  \n  get css() {\n    var map = this.map;\n    var ret = {};\n    for (var selector in map) {\n      var ruleSet = map[selector];\n      ret[selector] = {};\n      for (var i = 0; i < ruleSet.length; i++) {\n        var property = ruleSet[i];\n        ret[selector][property] = ruleSet.getPropertyValue(property);\n      }\n    }\n    return ret;\n  }\n\n  /**\n    * @desc Set a specific rule for a given selector\n    * @param {String} selector - the CSS selector for this rule (e.g. \"body\", \".class\", \"#id\")\n    * @param {String} property - the CSS property to set (e.g. \"background-color\", \"font-family\", \"z-index\")\n    * @param {String} value    - the new value for the rule (e.g. \"rgb(255, 255, 255)\", \"Helvetica\", \"99\")\n  */\n  setRule(selector, property, value) {\n    var sheet = this.sheet;\n    var rules = sheet.rules || sheet.cssRules;\n    var map = this.map;\n    // Convert property from camelCase to snake-case\n    property = property.replace(/([A-Z])/g, function($1) {\n      return \"-\" + $1.toLowerCase();\n    });\n    if (!map.hasOwnProperty(selector)) {\n      // If the selector hasn't been used yet we want to insert the rule at the end of the CSSRuleList, so we use its length as the index value\n      var index = rules.length;\n      // Prepare the rule declaration text, since both insertRule and addRule take this format\n      var declaration = property + \": \" + value;\n      // Insert the new rule into the stylesheet\n      try {\n        // Some browsers only support insertRule, others only support addRule, so we have to use both\n        sheet.insertRule(selector + \" {\" + declaration + \";}\", index);\n      } catch(e) {\n        sheet.addRule(selector, declaration, index);\n      } finally {\n        // Because safari is perhaps the worst browser in all of history, we have to remind it to keep the sheet rules up-to-date\n        rules = sheet.rules || sheet.cssRules;\n        // Add our newly inserted rule's CSSStyleDeclaration object to the internal map\n        map[selector] = rules[index].style;\n      }\n    }\n    else {\n      map[selector].setProperty(property, value);\n    }\n  }\n}","import wheel from \"ui/wheel\";\nimport slider from \"ui/slider\";\nimport iroColor from \"modules/color\";\nimport iroStyleSheet from \"modules/stylesheet\";\n\nimport { whenReady } from \"util/dom\";\n\nexport default class colorPicker {\n  /**\n    * @constructor color wheel object\n    * @param {Element | String} el - a DOM element or the CSS selector for a DOM element to use as a container for the UI\n    * @param {Object} opts - options for this instance\n  */\n  constructor(el, opts) {\n    opts = opts || {};\n    // event storage for `on` and `off`\n    this._events = {};\n    this._mouseTarget = false;\n    this._colorChangeActive = false;\n    this.css = opts.css || opts.styles || undefined;\n    // Wait for the document to be ready, then mount the UI\n    whenReady(() => {this._mount(el, opts)});\n  }\n  /**\n    * @desc mount the color picker UI into the DOM\n    * @param {Element | String} el - a DOM element or the CSS selector for a DOM element to use as a container for the UI\n    * @param {Object} opts - options for this instance\n    * @access protected\n  */\n  _mount(el, opts) {\n    // If `el` is a string, use it to select an Element, else assume it's an element\n    el = (\"string\" == typeof el) ? document.querySelector(el) : el;\n    // Find the width and height for the UI\n    // If not defined in the options, try the HTML width + height attributes of the wrapper, else default to 320\n    var width = opts.width || parseInt(el.width) || 320;\n    var height = opts.height || parseInt(el.height) || 320;\n    // Calculate layout variables\n    var padding = opts.padding + 2 || 6,\n        borderWidth = opts.borderWidth || 0,\n        markerRadius = opts.markerRadius || 8,\n        sliderMargin = opts.sliderMargin || 24,\n        sliderHeight = opts.sliderHeight || markerRadius * 2 + padding * 2 + borderWidth * 2,\n        bodyWidth = Math.min(height - sliderHeight - sliderMargin, width),\n        wheelRadius = bodyWidth / 2 - borderWidth,\n        leftMargin = (width - bodyWidth) / 2;\n    var marker = {\n      r: markerRadius\n    };\n    var borderStyles = {\n      w: borderWidth,\n      color: opts.borderColor || \"#fff\",\n    };\n\n    // Create UI elements\n    this.el = el;\n    this.ui = [\n      new wheel({\n        x: leftMargin,\n        y: 0,\n        r: wheelRadius,\n        padding: padding,\n        marker: marker,\n        border: borderStyles,\n        lightness: opts.wheelLightness == undefined ? true : opts.wheelLightness,\n        anticlockwise: opts.anticlockwise\n      }),\n      new slider({\n        sliderType: \"v\",\n        x: leftMargin + borderWidth,\n        y: bodyWidth + sliderMargin,\n        w: bodyWidth - borderWidth * 2,\n        h: sliderHeight - borderWidth * 2,\n        r: sliderHeight / 2 - borderWidth,\n        padding: padding,\n        marker: marker,\n        border: borderStyles\n      })\n    ];\n    // Create an iroStyleSheet for this colorWheel's CSS overrides\n    this.stylesheet = new iroStyleSheet();\n    // Create an iroColor to store this colorWheel's selected color\n    this.color = new iroColor();\n    // Whenever the selected color changes, trigger a colorWheel update too\n    this.color._onChange = this._update.bind(this);\n    this.color.set(opts.color || opts.defaultValue || \"#fff\")\n    // Hacky workaround for a couple of Safari SVG url bugs\n    // See https://github.com/jaames/iro.js/issues/18\n    // TODO: perhaps make this a seperate plugin, it's hacky and takes up more space than I'm happy with\n    this.on(\"history:stateChange\", (base) => {this.svg.updateUrls(base)});\n    this.emit(\"mount\", this);\n  }\n\n  /**\n    * @desc update the selected color\n    * @param {Object} color - an iroColor object with the new color value\n    * @param {Object} changes - booleans for each HSV channel: true if the new value is different to the old value, else false\n    * @access protected\n  */\n  _update(color, changes) {\n    var rgb = color.rgbString;\n    var css = this.css;\n    // Loop through each UI element and update it\n    for (var i = 0; i < this.ui.length; i++) {\n      this.ui[i].update(color, changes); \n    }\n    // Update the stylesheet too\n    for (var selector in css) {\n      var properties = css[selector];\n      for (var prop in properties) {\n        this.stylesheet.setRule(selector, prop, rgb);\n      }\n    } \n    // Prevent infinite loops if the color is set inside a `color:change` callback\n    if (!this._colorChangeActive) {\n      // While _colorChangeActive = true, this event cannot be fired\n      this._colorChangeActive = true;\n      this.emit(\"color:change\", color, changes);\n      this._colorChangeActive = false;\n    }\n  }\n\n  /**\n    * @desc Set a callback function for an event\n    * @param {String} eventType Name of the event to listen to, pass \"*\" to listen to all events\n    * @param {Function} callback Event callback\n  */\n  on(eventType, callback) {\n    var events = this._events;\n    (events[eventType] || (events[eventType] = [])).push(callback);\n  }\n\n  /**\n    * @desc Remove a callback function for an event added with on()\n    * @param {String} eventType The name of the event\n    * @param {Function} callback The watch callback to remove from the event\n  */\n  off(eventType, callback) {\n    var eventList = this._events[eventType];\n    if (eventList) eventList.splice(eventList.indexOf(callback), 1);\n  }\n\n  /**\n    * @desc Emit an event\n    * @param {String} eventType The name of the event to emit\n    * @param {Array} args array of args to pass to callbacks\n  */\n  emit(eventType, ...args) {\n    var events = this._events,\n        callbackList = (events[eventType] || []).concat((events[\"*\"] || []));\n    for (var i = 0; i < callbackList.length; i++) {\n      callbackList[i].apply(null, args); \n    }\n  }\n\n  // /**\n  //   * @desc DOM event handler\n  //   * @param {Event} e DOM event (currently either mouse or touch events)\n  // */\n  // handleEvent(e) {\n  //   // Detect if the event is a touch event by checking if it has the `touches` property\n  //   // If it is a touch event, use the first touch input\n  //   var point = e.touches ? e.changedTouches[0] : e,\n  //       // Get the screen position of the UI\n  //       rect = this.svg.el.getBoundingClientRect(),\n  //       // Convert the screen-space pointer position to local-space\n  //       x = point.clientX - rect.left,\n  //       y = point.clientY - rect.top;\n        \n  //   switch (e.type) {\n  //     case EVENT_MOUSEDOWN:\n  //     case EVENT_TOUCHSTART:\n  //       // Loop through each UI element and check if the point \"hits\" it\n  //       for (var i = 0; i < this.ui.length; i++) {\n  //         var uiElement = this.ui[i];\n  //         // If the element is hit, this means the user has clicked the element and is trying to interact with it\n  //         if (uiElement.checkHit(x, y)) {\n  //           // Set an internal reference to the uiElement being interacted with, for other internal event handlers\n  //           this._mouseTarget = uiElement;\n  //           // Attach event listeners\n  //           listen(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this, { passive:false });\n  //           // Emit input start event\n  //           this.emit(\"input:start\", this.color);\n  //           // Finally, use the position to update the picked color\n  //           this.color.hsv = this._mouseTarget.input(x, y);\n  //         }\n  //       }\n  //       break;\n  //     case EVENT_MOUSEMOVE:\n  //     case EVENT_TOUCHMOVE:\n  //       // Use the position to update the picker color\n  //       this.color.hsv = this._mouseTarget.input(x, y);\n  //       break;\n  //     case EVENT_MOUSEUP:\n  //     case EVENT_TOUCHEND:\n  //       this._mouseTarget = false;\n  //       this.emit(\"input:end\", this.color);\n  //       unlisten(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this);\n  //       break;\n  //   }\n  //   if (this._mouseTarget) {\n  //     e.preventDefault();\n  //   }\n  // }\n}","import colorPicker from \"modules/colorPicker\";\nimport color from \"modules/color\";\nimport stylesheet from \"modules/stylesheet\";\n\nexport default {\n  Color: color,\n  ColorPicker: colorPicker,\n  Stylesheet: stylesheet,\n  version: process.env.VERSION,\n};\n"],"names":["options","extend","obj","props","i","defer","Promise","resolve","then","bind","setTimeout","IS_NON_DIMENSIONAL","items","enqueueRender","component","_dirty","push","debounceRendering","rerender","p","list","pop","renderComponent","isNamedNode","node","nodeName","normalizedNodeName","toLowerCase","getNodeProps","vnode","attributes","children","defaultProps","undefined","removeNode","parentNode","removeChild","setAccessor","name","old","value","isSvg","style","cssText","test","innerHTML","__html","useCapture","replace","substring","addEventListener","eventProxy","removeEventListener","_listeners","e","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","className","this","type","event","mounts","diffLevel","isSvgMode","hydrating","flushMounts","c","afterMount","componentDidMount","idiff","dom","context","mountAll","componentRoot","out","prevSvgMode","splitText","_component","nodeValue","document","createTextNode","replaceChild","recollectNodeTree","vnodeName","originalComponent","oldDom","isDirectOwner","_componentConstructor","isOwner","_parentComponent","constructor","setComponentProps","base","unmountComponent","createComponent","nextBase","buildComponentFromVNode","String","createElementNS","createElement","firstChild","appendChild","fc","vchildren","a","length","nextSibling","isHydrating","j","f","vchild","child","originalChildren","childNodes","keyed","keyedLen","min","len","childrenLen","vlen","_child","key","__key","trim","insertBefore","innerDiffNode","dangerouslySetInnerHTML","attrs","diffAttributes","unmountOnly","ref","removeChildren","lastChild","next","previousSibling","recyclerComponents","Ctor","inst","prototype","render","Component","call","doRender","splice","state","renderMode","_disable","__ref","getDerivedStateFromProps","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","rendered","cbase","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","skip","snapshot","shouldComponentUpdate","componentWillUpdate","getChildContext","getSnapshotBeforeUpdate","toUnmount","childComponent","childProps","parent","ownerSVGElement","ret","diff","baseParent","componentRef","t","unshift","componentDidUpdate","afterUpdate","_renderCallbacks","beforeUnmount","componentWillUnmount","inner","setState","callback","forceUpdate","const","EVENT_READYSTATE_CHANGE","READYSTATE_COMPLETE","listen","el","eventList","params","unlisten","IroComponent","console","log","root","passive","handleEvent","preventDefault","point","touches","changedTouches","x","clientX","y","clientY","rect","getBoundingClientRect","input","IroMarker","h","class","overflow","fill","stroke","vectorEffect","PI","Math","sqrt","abs","round","IroWheel","id","offset","cx","cy","r","Array","map","_","hue","d","radius","startAngle","largeArcFlag","endAngle","cos","sin","join","anticlockwise","opacity","Marker","update","color","changes","opts","_opts","hsv","v","lightness","_lightness","setAttrs","toFixed","s","hueAngle","dist","rMax","marker","move","cX","cY","rangeMax","width","height","left","top","angle","atan2","floor","parseColorStr","str","maxValues","parsed","match","val1","parseInt","val2","val3","parseFloat","getColor","clamp","max","compareObjs","b","_onChange","_value","set","mix","color1","color2","weight","rgb1","rgb","rgb2","g","lighten","amount","col","darken","hsv2Rgb","q","rgb2Hsv","delta","hsv2Hsl","l","hsl2Hsv","hsl","hsl2Str","rgb2Str","rgb2Hex","toString","padStart","parseHexStr","hex","int","isShorthand","bitLength","bitMask","multiplier","parseHslStr","parseRgbStr","prototypeAccessors","newValue","oldValue","channel","hasOwnProperty","rgbString","hexString","hslString","setChannel","model","clone","compare","IroSlider","rx","ry","range","iroColor","sliderType","_gradient","stops","stopColor","percent","w","stylesheet","head","sheet","rules","cssRules","enabled","disabled","selector","css","ruleSet","property","getPropertyValue","setRule","$1","setProperty","index","declaration","insertRule","addRule","colorPicker","_events","_mouseTarget","_colorChangeActive","styles","_mount","readyState","stateChange","querySelector","padding","borderWidth","markerRadius","sliderMargin","sliderHeight","bodyWidth","borderStyles","borderColor","ui","wheel","leftMargin","wheelRadius","wheelLightness","slider","iroStyleSheet","_update","defaultValue","on","svg","updateUrls","emit","properties","prop","eventType","events","off","indexOf","concat","callbackList","apply","args","Color","ColorPicker","Stylesheet","version","process"],"mappings":"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"}